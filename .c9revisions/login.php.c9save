{"ts":1359153579031,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<?php\nsession_start();\n?>\n\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\">\n    <title>TREKKR</title>\n    <link rel=\"stylesheet\" href=\"main.css\" type=\"text/css\">\n    <script src=\"http://code.jquery.com/jquery-latest.min.js\" type=\"text/javascript\"></script>\n    <script src=\"https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&libraries=places\"></script>\n    <script src=\"map.js\"></script>\n  </head>\n  <body>\n        <h1>Trekkr</h1>\n    <b>login to your trekkr account here!</b>\n\t\n\t<?php\n\tif ($_SESSION['loggedin']) {\n\t\t// auto redirect to home (cannot login as more than one user)\n\t\theader('location:home.php');\n\t}\n\telse { ?>\n        <div id=\"navigation\">\n            <a href=\"home.php\">New Trek</a> | Login | <a href=\"register.php\">Register</a>\n        </div>\n\n\t<?php\n\t}\n\n\t$success = false;\n\t// check if login attempt\n\tif (isset($_POST[\"username\"]) && isset($_POST[\"password\"])) {\n\trequire(\"db.php\");\t// establish DB connection\n\t$user = $_POST[\"username\"];\n\t$pass = sha1($_POST[\"password\"]);\n\t$query = \"SELECT PASSWORD from users WHERE USERNAME='\" . mysql_real_escape_string($user) . \"'\";\n\t$result = mysql_query($query, $db) or die(mysql_error());\n\t$row = mysql_fetch_assoc($result);\n\tif ($pass == $row[\"PASSWORD\"]) {\n\t$success = true;\n\t$_SESSION['loggedin']=TRUE;\n\t$_SESSION['username']=$user;\n\theader('location:home.php');\n\t}\n\telse {\n\techo \"Invalid username or password <br />\";\n\t}\n\t}\n\t// not logged in\n\tif (!$success) {\t// show form\n\t?>\n        <div id=\"login_box\">\n\t<br/>\n            <form action=\"<?php $_SERVER[\"PHP_SELF\"]?>\" method=\"post\">\n                Username: <input type=\"text\" name=\"username\" id=\"username\"><br>\n                Password: <input type=\"password\" name=\"password\" id=\"password\">\n\t    <input type=\"submit\" name=\"login_button\" value=\"login\" class=\"user\" /><a href=\"register.php\">register</a>\n            </form>\n            \n\t    <?php }?>\n        </div>\n    </body>\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":1919}]],"length":1919}
{"contributors":[],"silentsave":true,"ts":1359154895104,"patch":[[{"diffs":[[0,"1>\n    <"],[-1,"b"],[1," "],[0,">login t"]],"start1":447,"start2":447,"length1":17,"length2":17}]],"length":1919,"saved":false}
{"ts":1359154897559,"patch":[[{"diffs":[[0,"1>\n    <"],[-1," "],[1,"div id=\"ead"],[0,">login t"]],"start1":447,"start2":447,"length1":17,"length2":27}]],"length":1929,"saved":false}
{"ts":1359154900065,"patch":[[{"diffs":[[0,"div id=\""],[1,"h"],[0,"ead"],[1,"er\""],[0,">login t"]],"start1":455,"start2":455,"length1":19,"length2":23}]],"length":1933,"saved":false}
{"ts":1359154904194,"patch":[[{"diffs":[[0,"header\">"],[-1,"l"],[0,"ogin to "]],"start1":463,"start2":463,"length1":17,"length2":16},{"diffs":[[0," here!</"],[-1,"b"],[1,"div"],[0,">\n\t\n\t<?p"]],"start1":498,"start2":498,"length1":17,"length2":19}]],"length":1934,"saved":false}
{"ts":1359154905137,"patch":[[{"diffs":[[0,"header\">"],[1,"L"],[0,"ogin to "]],"start1":463,"start2":463,"length1":16,"length2":17}]],"length":1935,"saved":false}
{"ts":1359154907932,"patch":[[{"diffs":[[0,"to your "],[-1,"t"],[1,"T"],[0,"rekkr ac"]],"start1":477,"start2":477,"length1":17,"length2":17}]],"length":1935,"saved":false}
{"ts":1359154911947,"patch":[[{"diffs":[[0," Trekkr "],[-1,"a"],[1,"A"],[0,"ccount h"]],"start1":484,"start2":484,"length1":17,"length2":17}]],"length":1935,"saved":false}
{"ts":1359154926659,"patch":[[{"diffs":[[0,"kr</h1>\n"],[1,"    "],[0,"    <div"]],"start1":442,"start2":442,"length1":16,"length2":20},{"diffs":[[0,"iv>\n"],[-1,"\t\n"],[1,"    \t\n    "],[0,"\t<?php\n"],[1,"    "],[0,"\tif "]],"start1":512,"start2":512,"length1":17,"length2":29},{"diffs":[[0,"in']) {\n"],[1,"    "],[0,"\t\t// aut"]],"start1":559,"start2":559,"length1":16,"length2":20},{"diffs":[[0,"e user)\n"],[1,"    "],[0,"\t\theader"]],"start1":627,"start2":627,"length1":16,"length2":20},{"diffs":[[0,"home.php');\n"],[-1,"\t}\n"],[1,"    \t}\n    "],[0,"\telse { ?>\n "]],"start1":658,"start2":658,"length1":27,"length2":35},{"diffs":[[0,"se { ?>\n"],[1,"    "],[0,"        "]],"start1":684,"start2":684,"length1":16,"length2":20},{"diffs":[[0,"        "],[1," "],[1,"   "],[0,"<a href="]],"start1":730,"start2":730,"length1":16,"length2":20},{"diffs":[[0,"    "],[1,"    "],[0,"</div>\n"],[-1,"\n\t<?php\n\t}\n\n"],[1,"    \n    \t<?php\n    \t}\n    \n    "],[0,"\t$su"]],"start1":824,"start2":824,"length1":27,"length2":51},{"diffs":[[0," false;\n"],[1,"    "],[0,"\t// chec"]],"start1":882,"start2":882,"length1":16,"length2":20},{"diffs":[[0,"attempt\n"],[1,"    "],[0,"\tif (iss"]],"start1":913,"start2":913,"length1":16,"length2":20},{"diffs":[[0,"d\"])) {\n"],[1,"    "],[0,"\trequire"]],"start1":980,"start2":980,"length1":16,"length2":20},{"diffs":[[0,"nection\n"],[1,"    "],[0,"\t$user ="]],"start1":1031,"start2":1031,"length1":16,"length2":20},{"diffs":[[0,"name\"];\n"],[1,"    "],[0,"\t$pass ="]],"start1":1064,"start2":1064,"length1":16,"length2":20},{"diffs":[[0,"ord\"]);\n"],[1,"    "],[0,"\t$query "]],"start1":1103,"start2":1103,"length1":16,"length2":20},{"diffs":[[0," . \"'\";\n"],[1,"    "],[0,"\t$result"]],"start1":1204,"start2":1204,"length1":16,"length2":20},{"diffs":[[0,"ror());\n"],[1,"    "],[0,"\t$row = "]],"start1":1267,"start2":1267,"length1":16,"length2":20},{"diffs":[[0,"esult);\n"],[1,"    "],[0,"\tif ($pa"]],"start1":1307,"start2":1307,"length1":16,"length2":20},{"diffs":[[0,"RD\"]) {\n"],[1,"    "],[0,"\t$succes"]],"start1":1345,"start2":1345,"length1":16,"length2":20},{"diffs":[[0,"= true;\n"],[1,"    "],[0,"\t$_SESSI"]],"start1":1367,"start2":1367,"length1":16,"length2":20},{"diffs":[[0,"]=TRUE;\n"],[1,"    "],[0,"\t$_SESSI"]],"start1":1400,"start2":1400,"length1":16,"length2":20},{"diffs":[[0,"=$user;\n"],[1,"    "],[0,"\theader("]],"start1":1434,"start2":1434,"length1":16,"length2":20},{"diffs":[[0,"');\n"],[-1,"\t}\n"],[1,"    \t}\n    "],[0,"\telse {\n"],[1,"    "],[0,"\tech"]],"start1":1472,"start2":1472,"length1":19,"length2":31},{"diffs":[[0,">\";\n"],[-1,"\t}\n\t}\n"],[1,"    \t}\n    \t}\n    "],[0,"\t// "]],"start1":1540,"start2":1540,"length1":14,"length2":26},{"diffs":[[0,"gged in\n"],[1,"    "],[0,"\tif (!$s"]],"start1":1572,"start2":1572,"length1":16,"length2":20},{"diffs":[[0,"ow form\n"],[1,"    "],[0,"\t?>\n    "]],"start1":1607,"start2":1607,"length1":16,"length2":20}]],"length":2083,"saved":false}
{"ts":1359154931490,"patch":[[{"diffs":[[0,"x\">\n"],[-1,"\t<br/>"],[0,"\n   "]],"start1":1648,"start2":1648,"length1":14,"length2":8}]],"length":2077,"saved":false}
{"ts":1359154933346,"patch":[[{"diffs":[[0,"\">\n\t    "],[1,"    "],[0,"<input t"]],"start1":1881,"start2":1881,"length1":16,"length2":20}]],"length":2081,"saved":false}
{"ts":1359154934358,"patch":[[{"diffs":[[0,"        "],[1,"    "],[0,"<input t"]],"start1":1885,"start2":1885,"length1":16,"length2":20}]],"length":2085,"saved":false}
{"ts":1359154945868,"patch":[[{"diffs":[[0,"ogin | <a href=\""],[-1,"r"],[1,"R"],[0,"egister.php\">Reg"]],"start1":777,"start2":777,"length1":33,"length2":33}]],"length":2085,"saved":false}
{"ts":1359154954297,"patch":[[{"diffs":[[0,"gin "],[-1,"| <a href=\"Register.php\">Register</a>"],[0,"\n   "]],"start1":778,"start2":778,"length1":45,"length2":8}]],"length":2048,"saved":false}
{"ts":1359154965353,"patch":[[{"diffs":[[0,"er.php\">"],[-1,"r"],[1,"R"],[0,"egister<"]],"start1":1945,"start2":1945,"length1":17,"length2":17}]],"length":2048,"saved":false}
{"ts":1359155002363,"patch":[[{"diffs":[[0,"        "],[1,"<br>"],[0,"<input t"]],"start1":1852,"start2":1852,"length1":16,"length2":20}]],"length":2052,"saved":false}
{"ts":1359155017128,"patch":[[{"diffs":[[0,"er.php\">"],[1," "],[0,"Register"]],"start1":1949,"start2":1949,"length1":16,"length2":17}]],"length":2053,"saved":false}
{"ts":1359155022440,"patch":[[{"diffs":[[0,"er.php\">"],[-1," "],[0,"Register"]],"start1":1949,"start2":1949,"length1":17,"length2":16}]],"length":2052,"saved":false}
{"ts":1359155026051,"patch":[[{"diffs":[[0,"user\" />"],[1," "],[0,"<a href="]],"start1":1926,"start2":1926,"length1":16,"length2":17}]],"length":2053,"saved":false}
{"ts":1359155113256,"patch":[[{"diffs":[[0,"sername\""],[1," lab"],[0,"><br>\n  "]],"start1":1753,"start2":1753,"length1":16,"length2":20}]],"length":2057,"saved":false}
{"ts":1359155116743,"patch":[[{"diffs":[[0,"ame\" lab"],[1,"el=\"U"],[0,"><br>\n  "]],"start1":1757,"start2":1757,"length1":16,"length2":21}]],"length":2062,"saved":false}
{"ts":1359155117321,"patch":[[{"diffs":[[0,"label=\"U"],[1,"sernam"],[0,"><br>\n  "]],"start1":1762,"start2":1762,"length1":16,"length2":22}]],"length":2068,"saved":false}
{"ts":1359155118388,"patch":[[{"diffs":[[0,"\"Usernam"],[1,"e"],[0,"><br>\n  "]],"start1":1768,"start2":1768,"length1":16,"length2":17}]],"length":2069,"saved":false}
{"ts":1359155119341,"patch":[[{"diffs":[[0,"Username"],[1,"\""],[0,"><br>\n  "]],"start1":1769,"start2":1769,"length1":16,"length2":17}]],"length":2070,"saved":false}
{"ts":1359155123969,"patch":[[{"diffs":[[0,"    "],[-1," Username:"],[0," <in"]],"start1":1698,"start2":1698,"length1":18,"length2":8}]],"length":2060,"saved":false}
{"ts":1359155131944,"patch":[[{"diffs":[[0,"        "],[1," Username:"],[0," <input "]],"start1":1694,"start2":1694,"length1":16,"length2":26},{"diffs":[[0,"bel=\"Use"],[-1,"rname\""],[0,"><br>\n  "]],"start1":1764,"start2":1764,"length1":22,"length2":16}]],"length":2064,"saved":false}
{"ts":1359155134768,"patch":[[{"diffs":[[0,"labe"],[-1,"l=\"Use"],[0,"><br"]],"start1":1762,"start2":1762,"length1":14,"length2":8}]],"length":2058,"saved":false}
{"ts":1359155138613,"patch":[[{"diffs":[[0,"ame\""],[-1," labe"],[1,"\n                "],[0,"><br"]],"start1":1757,"start2":1757,"length1":13,"length2":25}]],"length":2070,"saved":false}
{"ts":1359155139107,"patch":[[{"diffs":[[0,"        "],[-1,"    "],[0,"><br>\n  "]],"start1":1766,"start2":1766,"length1":20,"length2":16}]],"length":2066,"saved":false}
{"ts":1359155140975,"patch":[[{"diffs":[[0,"sername\""],[-1,"\n            "],[0,"><br>\n  "]],"start1":1753,"start2":1753,"length1":29,"length2":16}]],"length":2053,"saved":false}
{"ts":1359155146024,"patch":[[{"diffs":[[0,"ername\">"],[-1,"<br>"],[0,"\n       "]],"start1":1754,"start2":1754,"length1":20,"length2":16},{"diffs":[[0,"            "],[1,"    <br>\n"],[0,"    Password"]],"start1":1763,"start2":1763,"length1":24,"length2":33}]],"length":2058,"saved":false}
{"ts":1359155148182,"patch":[[{"diffs":[[0,"    <br>"],[-1,"\n    "],[1,"<br"],[0,"Password"]],"start1":1775,"start2":1775,"length1":21,"length2":19}]],"length":2056,"saved":false}
{"ts":1359155149034,"patch":[[{"diffs":[[0," <br><br"],[1,">"],[0,"Password"]],"start1":1778,"start2":1778,"length1":16,"length2":17}]],"length":2057,"saved":false}
{"ts":1359155160287,"patch":[[{"diffs":[[0,"   <br><"],[1,"br><"],[0,"input ty"]],"start1":1861,"start2":1861,"length1":16,"length2":20}]],"length":2061,"saved":false}
{"ts":1359155572687,"patch":[[{"diffs":[[0,"| Login "],[1," "],[0,"\n       "]],"start1":774,"start2":774,"length1":16,"length2":17}]],"length":2062,"saved":false}
{"ts":1359155604124,"patch":[[{"diffs":[[0,"| Login "],[1,"|"],[0," \n      "]],"start1":774,"start2":774,"length1":16,"length2":17}]],"length":2063,"saved":false}
{"ts":1359155633648,"patch":[[{"diffs":[[0,"        "],[1,"|"],[0," <a href"]],"start1":733,"start2":733,"length1":16,"length2":17}]],"length":2064,"saved":false}
